<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supplier Portal - Summit Gear & Adventures</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>ğŸ”ï¸ Summit Gear & Adventures</h1>
                <p class="tagline">Supplier Portal</p>
            </div>
            <div class="supplier-info">
                <div class="supplier-details">
                    <span class="company-name">ğŸ¢ Loading...</span>
                    <span class="contact-person">Contact: Loading...</span>
                    <span class="service-area">ğŸ“ UK Supplier</span>
                </div>
                <div class="nav-actions">
                    <button class="btn-logout">ğŸšª Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-layout">
        <!-- Left Sidebar Navigation -->
        <aside class="sidebar">
            <nav class="sidebar-menu">
                <a href="#dashboard" class="menu-item active">
                    <span class="icon">ğŸ“Š</span>
                    <span>Dashboard</span>
                </a>
                
                <div class="menu-section">
                    <a href="#stock-requests" class="menu-item">
                        <span class="icon">ğŸ“¥</span>
                        <span>Stock Requests</span>
                        <span class="badge" id="requestsBadge" style="display:none;">0</span>
                    </a>
                </div>

                <div class="menu-section">
                    <a href="#products" class="menu-item">
                        <span class="icon">ğŸ“¦</span>
                        <span>Product Catalog</span>
                    </a>
                </div>

                <a href="#payments" class="menu-item">
                    <span class="icon">ğŸ’°</span>
                    <span>Payments & Invoices</span>
                </a>

                <a href="#reports" class="menu-item">
                    <span class="icon">ğŸ“ˆ</span>
                    <span>Sales Reports</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="content-area">
            <!-- =====================================================
                 Dashboard Section
                 ===================================================== -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h1>ğŸ“Š Supplier Dashboard</h1>
                    <p class="date">ğŸ“… Loading...</p>
                </div>

                <div class="welcome-message">
                    <h2>Welcome Back! ğŸ‘‹</h2>
                    <p>Here's your business overview for today</p>
                </div>

                <!-- Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-icon">ğŸ“¥</span>
                            <h3>Pending Requests</h3>
                        </div>
                        <div class="stat-value" id="pendingRequestsCount">0</div>
                        <a href="#stock-requests" class="stat-link" onclick="navigateTo('stock-requests')">View Requests â†’</a>
                    </div>

                    <div class="stat-card warning">
                        <div class="stat-header">
                            <span class="stat-icon">ğŸ’°</span>
                            <h3>Pending Payment</h3>
                        </div>
                        <div class="stat-value" id="pendingPaymentAmount">Â£0</div>
                        <a href="#payments" class="stat-link" onclick="navigateTo('payments')">View Invoices â†’</a>
                    </div>

                    <div class="stat-card success">
                        <div class="stat-header">
                            <span class="stat-icon">ğŸ“¦</span>
                            <h3>Products Listed</h3>
                        </div>
                        <div class="stat-value" id="productCount">0</div>
                        <a href="#products" class="stat-link" onclick="navigateTo('products')">View Catalog â†’</a>
                    </div>
                </div>

                <!-- Action Items -->
                <div class="card alert-card">
                    <div class="card-header">
                        <h2>âš ï¸ Action Required</h2>
                    </div>
                    <div class="action-list" id="actionItemsList">
                        <div class="action-item"><span class="action-text">Loading...</span></div>
                    </div>
                </div>

                <!-- Sales Performance and Top Products -->
                <div class="grid-2col">
                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ“ˆ Sales Performance</h2>
                        </div>
                        <div class="performance-stats">
                            <div class="no-data">ğŸ“Š Loading from database...</div>
                        </div>
                        <button class="btn btn-secondary btn-block" onclick="generateSalesReport()">View Detailed Report</button>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ† Top Products</h2>
                        </div>
                        <ol class="top-products-list">
                            <li>Loading from database...</li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- =====================================================
                 Stock Requests Section (from Inventory Admin)
                 ===================================================== -->
            <section id="stock-requests" class="content-section">
                <div class="section-header">
                    <h1>ğŸ“¥ Stock Requests from Stores</h1>
                    <p style="color:#6b7280;">Inventory managers have requested the following stock replenishments</p>
                </div>

                <div class="stock-requests-container" id="stockRequestsContainer">
                    <p style="text-align:center; padding:2rem; color:#6b7280;">Loading stock requests...</p>
                </div>
            </section>

            <!-- =====================================================
                 Product Catalog Section
                 ===================================================== -->
            <section id="products" class="content-section">
                <div class="section-header">
                    <h1>ğŸ“¦ Product Catalog</h1>
                    <button class="btn btn-primary" onclick="addNewProduct()">â• Add New Product</button>
                </div>

                <!-- Search and Filters -->
                <div class="filters-bar">
                    <input type="text" placeholder="ğŸ” Search products..." class="search-input" id="productSearchInput">
                    <select class="filter-select" id="categoryFilter" onchange="renderProducts(this.value)">
                        <option value="all">All Categories</option>
                        <option value="camping">Camping</option>
                        <option value="clothing">Clothing</option>
                        <option value="footwear">Footwear</option>
                        <option value="bags">Bags</option>
                        <option value="accessories">Accessories</option>
                    </select>
                    <select class="filter-select" id="stockFilter">
                        <option value="all">All Stock Status</option>
                        <option value="instock">In Stock</option>
                        <option value="lowstock">Low Stock</option>
                        <option value="outofstock">Out of Stock</option>
                    </select>
                </div>

                <!-- Products List -->
                <div class="products-list" id="productsList">
                    <div class="no-data">Loading products...</div>
                </div>
            </section>

            <!-- =====================================================
                 Payments & Invoices Section
                 ===================================================== -->
            <section id="payments" class="content-section">
                <div class="section-header">
                    <h1>ğŸ’° Payments & Invoices</h1>
                </div>

                <div class="payment-summary">
                    <div class="summary-item">
                        <span>Payment Terms:</span>
                        <strong>Net 30 Days</strong>
                    </div>
                    <div class="summary-item warning">
                        <span>Outstanding Balance:</span>
                        <strong id="pendingBalance">Â£0.00</strong>
                        <small id="pendingInvoiceCount">0 Invoices</small>
                    </div>
                </div>

                <!-- Pending Invoices (Unpaid Orders) -->
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ“‹ Pending Invoices (Unpaid Orders)</h2>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Invoice/PO No</th>
                                    <th>Order Date</th>
                                    <th>Status</th>
                                    <th>Amount</th>
                                    <th>Due Date</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="pendingInvoicesTable">
                                <tr><td colspan="6">Loading from database...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Paid Orders -->
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ’³ Paid Orders</h2>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>PO Number</th>
                                    <th>Order Date</th>
                                    <th>Received Date</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="paymentHistoryTable">
                                <tr><td colspan="5">Loading from database...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="generateSalesReport()">ğŸ“Š Payment Report</button>
                    <button class="btn btn-secondary" onclick="alert('Contact: finance@summitgear.co.uk\nPhone: +44 131 555 1234')">ğŸ“§ Contact Finance</button>
                </div>
            </section>

            <!-- =====================================================
                 Sales Reports Section
                 ===================================================== -->
            <section id="reports" class="content-section">
                <div class="section-header">
                    <h1>ğŸ“ˆ Sales Reports</h1>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ“Š Report Options</h2>
                    </div>
                    <div class="report-options" style="display: grid; gap: 1rem; padding: 1rem 0;">
                        <button class="btn btn-primary btn-block" onclick="generateSalesReport()">
                            ğŸ“Š Generate Monthly Sales Report
                        </button>
                        <button class="btn btn-secondary btn-block" onclick="exportReport('pdf')">
                            ğŸ“„ Export as PDF
                        </button>
                        <button class="btn btn-secondary btn-block" onclick="exportReport('excel')">
                            ğŸ“Š Export as Excel
                        </button>
                    </div>
                </div>

                <div class="grid-2col">
                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ“ˆ Monthly Trend</h2>
                        </div>
                        <div class="performance-stats" id="monthlyTrendStats">
                            <div class="no-data">ğŸ“Š Loading from database...</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2>ğŸ“¦ Order Summary</h2>
                        </div>
                        <div class="performance-stats" id="orderSummaryStats">
                            <div class="no-data">ğŸ“Š Loading from database...</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- =====================================================
         Shipping Modal
         ===================================================== -->
    <div id="shippingModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); align-items: center; justify-content: center; z-index: 9999;">
        <div class="modal-content" style="background: white; padding: 2rem; border-radius: 1rem; max-width: 500px; width: 90%;">
            <h2 style="margin-bottom: 1.5rem;">ğŸ“¦ Ship Order</h2>
            <input type="hidden" id="shippingOrderId">
            <div id="shippingOrderInfo" style="background: #f3f4f6; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;"></div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Tracking Number *</label>
                <input type="text" id="trackingNumber" placeholder="Enter tracking number" style="width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;">
            </div>
            
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Carrier</label>
                <select id="carrierSelect" style="width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 0.5rem;">
                    <option value="DHL Express">DHL Express</option>
                    <option value="UPS">UPS</option>
                    <option value="FedEx">FedEx</option>
                    <option value="Royal Mail">Royal Mail</option>
                    <option value="Parcelforce">Parcelforce</option>
                </select>
            </div>
            
            <div style="display: flex; gap: 1rem;">
                <button class="btn btn-secondary" onclick="closeShippingModal()" style="flex: 1;">Cancel</button>
                <button class="btn btn-primary" onclick="submitShipping()" style="flex: 1;">âœ… Confirm Shipment</button>
            </div>
        </div>
    </div>

    <!-- Additional Styles -->
    <style>
        .no-data {
            text-align: center;
            padding: 2rem;
            color: #6b7280;
            font-size: 1.1rem;
        }
        
        .order-notes {
            background: #fef3c7;
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .status-badge.confirmed {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .status-badge.in-stock {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-badge.low-stock {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-badge.out-of-stock {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .status-badge.paid {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-badge.shipped {
            background: #e0e7ff;
            color: #4338ca;
        }
        
        .status-badge.received {
            background: #d1fae5;
            color: #065f46;
        }
        
        .welcome-message p {
            color: #1e40af;
            margin-top: 0.5rem;
        }
        
        .modal {
            display: none;
        }
        
        .modal.show {
            display: flex !important;
        }
    </style>

    <script src="js/supplier.js?v=11"></script>
</body>
</html>
